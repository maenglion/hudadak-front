<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
  <title>HUDADAK</title>
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#f4f6f8" />
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="app-container">
    <!-- SLIDE-IN SETTINGS PANEL -->
   <aside id="settings-panel">
       <section class="settings-section">
      <h2>표시 기준 설정</h2>
      <div class="radio-group" id="standard-options">
        <label>
          <input type="radio" name="aq_standard" value="KOR"> 대한민국 환경부 (CAI)
        </label>
        <label>
          <input type="radio" name="aq_standard" value="WHO8"> WHO 권고 (8단계)
        </label>
      </div>
      <p id="standard-description" class="section-description">
        표시 기준은 게이지와 막대 그래프의 색상 및 등급에 적용됩니다.
      </p>
    </section>

    <section class="settings-section data-story">
      <h2>이 앱의 특별한 이야기</h2>
      <p>
        <strong>후다닥</strong>은 단순한 미세먼지 앱이 아닙니다. 국내 측정망 데이터뿐만 아니라, 전 세계의 기상 모델과 위성 데이터를 종합하여 가장 정확하고 신뢰도 높은 정보를 제공하기 위해 노력합니다.
      </p>
      <p>
        저희는 Open-Meteo의 고급 기상 모델을 통해 대기의 흐름을 예측하고, 위성으로 관측된 에어로졸 데이터를 분석하여 현재 위치에 가장 가까운 최적의 데이터를 찾아냅니다. 이를 통해 측정소가 없는 지역의 대기 질까지 추정하여 정보의 공백을 최소화합니다.
      </p>
    </section>
      
    <section class="settings-section">
      <h2>예보 뱃지 안내</h2>
      <p>
        메인 화면의 예보 카드에는 예측의 신뢰도와 주요 원인을 나타내는 뱃지가 표시됩니다.
      </p>
      <div class="badge-info">
        <span class="badge-example">신뢰도 높음</span>
        <p>예측 모델의 신뢰도가 높을 때 표시됩니다.</p>
      </div>
      <div class="badge-info">
        <span class="badge-example">대기 정체</span>
        <p>바람이 거의 없어 오염물질이 정체될 때 표시됩니다.</p>
      </div>
    </section>

    </aside>
    <div id="settings-backdrop"></div>

    <!-- HEADER -->
    <header class="topbar">
      <button id="settings-btn" class="icon-button" aria-label="설정 열기">☰</button>
      <h1 class="app-title" style="margin-left:8px;">HUDADAK</h1>
      <a class="icon-btn right" href="/setup/index.html" title="설정">⚙️</a>
    </header>

    <main>
      <!-- 종합 요약(HERO) -->
      <section class="hero" style="margin:8px;">
        <div class="hero-meta">
          <div id="station-name" class="hero-loc">—</div>
          <div id="display-ts" class="hero-time">—</div>
        </div>
        <div class="hero-score">
          <!-- 등급/간단 설명은 app.js에서 계산해 넣을 수 있음. -->
          <div id="hero-grade" class="grade">—</div>
          <div id="hero-desc" class="desc">—</div>
        </div>
      </section>
      <!-- 5일 예보 -->
<section class="card" style="margin:8px;">
  <h4>예보</h4>
  <div id="forecast-grid" class="forecast-grid">
    <!-- 데이터 없을 땐 샘플 1장 표시 -->
    <div class="forecast-card">
      <p class="forecast-day">금요일</p>
      <div class="forecast-icon">☀️</div>
      <p class="forecast-temp">22° / <strong>28°</strong></p>
      <p class="forecast-desc">맑음</p>
    </div>
  </div>
  <small id="forecast-note" class="muted" style="margin-left:8px"></small>
</section>


      <!-- 상세 지표 카드 -->
      <section class="card" style="margin:8px;">
        <h4>주요 지표</h4>

        <div class="gauge-display" style="display:grid; grid-template-columns:1fr 1fr; gap:16px;">
          <!-- PM10 -->
          <div class="semi-circle-gauge">
            <div class="gauge-header"><h4>미세먼지 (PM10)</h4></div>
            <div class="gauge-arc" id="pm10-arc">
              <div class="gauge-content">
                <span class="gauge-grade" id="pm10-grade">--</span>
                <span class="gauge-value" id="pm10-value">--</span>
              </div>
            </div>
          </div>
          <!-- PM2.5 -->
          <div class="semi-circle-gauge">
            <div class="gauge-header"><h4>초미세먼지 (PM2.5)</h4></div>
            <div class="gauge-arc" id="pm25-arc">
              <div class="gauge-content">
                <span class="gauge-grade" id="pm25-grade">--</span>
                <span class="gauge-value" id="pm25-value">--</span>
              </div>
            </div>
          </div>
        </div>

        <div class="standard-display" style="margin-top:8px;">
          <span id="current-standard-label" class="muted">기준: —</span>
        </div>

        <div class="linear-bars" id="linear-bars-container" style="margin-top:8px;">
          <!-- O3/NO2/SO2/CO 막대는 필요 시 JS에서 렌더 -->
        </div>
      </section>
    </main>

    <!-- 하단 검색 바 -->
    <footer class="bottom-bar" style="display:flex; gap:8px; padding:12px; position:sticky; bottom:0; background:var(--bg);">
      <input type="search" id="place" class="search" placeholder="지역 검색 (예: 강남역) 또는 '37.57,126.98'" />
      <button id="searchBtn" class="icon-btn" aria-label="검색">🔎</button>
      <button id="btn-current" class="icon-btn" aria-label="현 위치">📍</button>
    </footer>
  </div>

  <!-- 앱 엔트리 (캐시 우회 버전) -->
  <script type="module" src="/app.js?v=20251017a"></script>
</body>
</html>
