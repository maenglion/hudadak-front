<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>후다닥 미세먼지 피하기</title>

  <!-- PWA / 상태표시줄 -->
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#1e88e5" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- 초기 포인트 컬러(깜빡임 방지) -->
  <script>
  (function(){
    try{
      const accent = localStorage.getItem('app-accent') || '#1e88e5';
      document.documentElement.style.setProperty('--primary-color', accent);
      const meta = document.querySelector('meta[name="theme-color"]');
      if (meta) meta.setAttribute('content', accent);
    }catch(_){}
  })();
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="/styles.css" />

  <!-- Preconnect -->
  <link rel="preconnect" href="https://dapi.kakao.com" crossorigin>
  <link rel="preconnect" href="https://air-api-350359872967.asia-northeast3.run.app" crossorigin>
</head>
<body>

  <!-- HEADER -->
  <header class="topbar">
    <a class="icon-btn left" href="/setup/index.html" aria-label="설정">⚙️</a>
    <a id="std-badge" class="text-muted" href="/setup/index.html" style="margin-left:auto;text-decoration:none"></a>
  </header>

  <!-- HERO -->
  <section id="hero" class="hero">
    <div class="hero-meta">
      <div id="hero-location" class="hero-loc">—</div>
      <div id="hero-time" class="hero-time">—</div>
    </div>
    <div class="hero-score">
      <div id="hero-value" class="value">--</div>
      <div id="hero-grade" class="grade">—</div>
      <div id="hero-desc" class="desc">—</div>
    </div>
  </section>

  <!-- 상단 카드: 검색/예보 요약 -->
  <section id="forecast-section" class="card" style="margin:8px;">
    <div class="row" style="align-items:center;gap:8px;">
      <input id="place" class="search" placeholder="지역 검색 (예: 송도동, 가평군)" autocomplete="off">
      <button id="btn-current" class="icon-btn" title="현 위치">📍</button>
    </div>
    <small id="forecast-time" class="muted"></small>
    <div class="muted" style="margin-top:4px;">기준 지역: <span id="forecast-region"></span></div>
    <div id="whyTags" class="tag-container" style="margin-top:8px;"></div>
    <p id="forecastCause" class="inform-cause-text"></p>
  </section>

  <!-- 필요하면 카드 더 -->
  <section class="cards scroller" id="cards">
    <article class="card scroller-item">
      <h4>주요 지표</h4>
      <div id="mini-gauges" class="mini-grid"></div>
    </article>
  </section>

  <!-- FAB -->
  <button id="btn-fab-current" class="fab" title="현 위치로 재로딩">📍</button>

  <!-- Footer -->
  <footer class="site-footer" style="text-align:center;margin:16px 0;">
    <a href="/termsofuse.html">이용약관</a> · Owner: 2e-studio
  </footer>

  <!-- App (메인 엔트리만 로드) -->
  <script type="module" src="/app.js"></script>
  <script type="module">
    import { STANDARDS } from '/js/standards.js';
    const code = localStorage.getItem('aq_standard') || 'WHO8';
    const label = STANDARDS[code]?.label || code;
    const badge = document.getElementById('std-badge');
    if (badge) badge.textContent = `기준: ${label}`;
  </script>
</body>
</html>
