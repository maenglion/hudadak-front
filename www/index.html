<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>후다닥 미세먼지 피하기</title>
  
  <!-- SEO and PWA Meta Tags -->
  <meta name="color-scheme" content="light dark">
  <meta name="theme-color" content="#ffffff">
  <meta property="og:title" content="후다닥 미세먼지 피하기">
  <meta property="og:description" content="내 주변 가장 가까운 곳의 미세먼지 정보를 확인하세요!">
  <meta property="og:image" content="https://placehold.co/600x315/1E88E5/FFFFFF?text=후다닥!%0A미세먼지%0A피하기">
  <link rel="apple-touch-icon" sizes="180x180" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icon-192.png">
  <link rel="manifest" href="manifest.json">

  <!-- Stylesheet -->
  <link rel="stylesheet" href="styles.css">

  <!-- Preconnect for performance -->
  <link rel="preconnect" href="https://dapi.kakao.com" crossorigin>
  <link rel="preconnect" href="https://air-api-350359872967.asia-northeast3.run.app" crossorigin>
</head>
<body>

  <!-- HEADER (상태표시줄 아래) -->
  <header class="topbar">
    <button id="btn-settings" class="icon-btn" aria-label="설정">⚙️</button>
  </header>

  <!-- HERO (최종 점수/장소/시간/메시지 + 그라데이션) -->
  <section id="hero" class="hero">
    <div class="hero-meta">
      <div id="hero-location" class="hero-loc">—</div>
      <div id="hero-time" class="hero-time">—</div>
    </div>
    <div class="hero-score">
      <div id="hero-value" class="value">--</div>
      <div id="hero-grade" class="grade">—</div>
      <div id="hero-desc" class="desc">—</div>
    </div>
  </section>

  <!-- SEARCH -->
  <section id="search">
    <input type="text" id="place" placeholder="지역 검색 (예: 송도동, 가평군)">
    <button id="searchBtn" aria-label="검색">검색</button>
  </section>

  <!-- ERROR MESSAGE -->
  <div id="error-message" class="error-message"></div>

  <!-- CARDS (가로 스와이프) -->
  <section class="cards scroller" id="cards">
    <!-- 카드 #1: 미니 게이지 그리드 -->
    <article class="card">
      <h4>주요 지표</h4>
      <div id="mini-gauges" class="mini-grid">
        <!-- Javascript will fill this area -->
      </div>
    </article>
    
    <!-- 카드 #2: 예보 정보 -->
    <article id="forecast-section" class="card" style="display: none;">
      <h3>오늘의 예보 <span id="forecast-region" class="forecast-region-text"></span></h3>
      <div id="whyTags" class="tag-container"></div>
      <p id="forecastCause" class="inform-cause-text"></p>
    </article>
  </section>
  
  <!-- (선택) 기존 큰 게이지 섹션 - 기본적으로 숨김 -->
  <section id="gauges" style="display:none;">
    <div class="gauge-container">
      <h2>미세먼지</h2>
      <div class="gauge-wrapper">
        <div class="gauge-wheel" id="gaugePM10"></div>
        <div class="gauge-hole">
          <div class="gauge-status" id="statusTextPM10">--</div>
          <div class="gauge-value" id="valueTextPM10">-- µg/m³</div>
        </div>
      </div>
      <p id="stationPM10" class="station-info">--</p>
    </div>
    <div class="gauge-container">
      <h2>초미세먼지</h2>
      <div class="gauge-wrapper">
        <div class="gauge-wheel" id="gaugePM25"></div>
        <div class="gauge-hole">
          <div class="gauge-status" id="statusTextPM25">--</div>
          <div class="gauge-value" id="valueTextPM25">-- µg/m³</div>
        </div>
      </div>
      <p id="stationPM25" class="station-info">--</p>
    </div>
  </section>


  <!-- SETTINGS MODAL -->
  <dialog id="settings-modal">
    <form method="dialog" class="settings">
      <h3>설정</h3>
      <label class="row">
        <span>표준</span>
        <select id="std-select">
          <option value="MOE">환경부(국가 기준)</option>
          <option value="WHO">WHO 권고</option>
        </select>
      </label>
      <p class="hint">표준은 미니 게이지의 퍼센트/색상에만 적용됩니다. 메인 점수는 통합대기지수(CAI)를 사용합니다.</p>
      <menu>
        <button value="cancel">닫기</button>
      </menu>
    </form>
  </dialog>

  <footer>
    <p>© 2025년 10월 13일 minhoolee</p>
  </footer>

  <script type="module" src="/app.js?v=20251013" defer></script>
</body>
</html>
